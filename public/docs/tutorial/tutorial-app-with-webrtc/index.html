<!doctype html>
<html lang="en">
<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" crossorigin="anonymous">
<title>Tutorial building a live stream app with WebRTC — inLive</title>
<meta name="title" content="Tutorial building a live stream app with WebRTC — inLive">
 <meta name="description" content="This tutorial will show you how to build a live video stream web app with WebRTC video source input."> 
<meta property="og:title" content="Tutorial building a live stream app with WebRTC — inLive">
 <meta property="og:description" content="This tutorial will show you how to build a live video stream web app with WebRTC video source input."> 







  

<link href="/css/tailwind.min.af940a7a5f33eaa4d44e4223e949b42ae52b4002c8b211a6a4db8a604bf1d1b7.css" rel="stylesheet" />
</head>
<body class="antialiased">
<div class="min-h-screen flex flex-col">
  <header class="h-14 lg:h-16 w-full sticky top-0 z-10">
  <div class="bg-white p-3 lg:px-8 lg:py-5 flex items-center justify-between">
    <div class="flex items-center">
      <a href="/" class="w-16 h-6">
        <img class="w-full h-full object-cover" width="64" height="24" src="/images/logo/logo.png" alt="Inlive Logo">
      </a>
    </div>
    
    <button type="button" class="block lg:hidden p-1 text-gray-500" aria-label="open navigation menu" onclick="handleToggleNavMenu()">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" />
      </svg>
    </button><nav class="hidden lg:block">
  <ul class="flex items-center">
    <li class="mr-8 font-semibold text-sm leading-6">
      <a href="/#what-we-offer" class="inline-block text-gray-700 hover:text-blue-600">What We Offer</a>
    </li>
    <li class="mr-8 font-semibold text-sm leading-6">
      <a href="/#what-is-inlive" class="inline-block text-gray-700 hover:text-blue-600">What is inLive</a>
    </li>
    <li class="mr-8 font-semibold text-sm leading-6">
      <a href="/docs/introduction/" class="inline-block text-gray-700 hover:text-blue-600">Developer Portal</a>
    </li>
    <li class="mr-8 font-semibold text-sm leading-6">
      <a href="/blog/" class="inline-block text-gray-700 hover:text-blue-600">Blog</a>
    </li>
    <li class="mr-8 font-semibold text-sm leading-6">
      <hr class="w-[1px] border-none h-6 bg-gray-300">
    </li>
    <li class="font-semibold text-sm leading-6">
      <a href="/login" class="inline-block text-gray-700 hover:text-blue-600">Login</a>
    </li>
  </ul>
</nav></div>
  <div style="top: -1px;" class="w-full border-b border-gray-300 relative"></div>
</header>
<div id="mobile-nav-overlay" onclick="handleToggleNavMenu()"
  class="hidden lg:hidden fixed top-0 left-0 bottom-0 right-0 w-full h-full bg-black bg-opacity-30 z-40">
</div>
<div id="mobile-nav-menu" class="hidden lg:hidden fixed top-0 mt-4 left-0 ml-4 right-0 mr-4 w-[calc(100%-2rem)] z-50">
  <nav class="bg-white w-full p-6 shadow-lg rounded-lg">
    <ul>
      <li class="mb-6 font-semibold text-base flex items-center justify-between relative">
        <a href="/#what-we-offer" class="text-gray-700">What We Offer</a>
        <button type="button" aria-label="close navigation menu" class="p-1 absolute right-0"
          onclick="handleToggleNavMenu()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </li>
      <li class="mb-6 font-semibold text-base">
        <a href="/#what-is-inlive" class="text-gray-700">What is inLive</a>
      </li>
      <li class="mb-6 font-semibold text-base">
        <a href="/docs/introduction/" class="text-gray-700">Developer Portal</a>
      </li>
      <li class="mb-6 font-semibold text-base">
        <a href="/blog/" class="text-gray-700">Blog</a>
      </li>
      <li class="mb-6 font-semibold text-base">
        <hr class="w-full h-[1px] border-none bg-gray-300">
      </li>
      <li class="font-semibold text-base">
        <a href="/login" class="text-gray-700">Login</a>
      </li>
    </ul>
  </nav>
</div>
  <div class="lg:flex lg:flex-1">
    <section class="h-14 w-full sticky top-14 lg:hidden bg-white px-4 py-3 flex items-center justify-between z-10 border-b border-b-gray-300">
  <strong class="font-semibold text-sm leading-8 text-gray-600">Developer Portal</strong>
  <div class="grid grid-cols-1 items-center gap-x-4">
    
    <button type="button" class="p-1 text-gray-500" aria-label="open sidebar navigation menu" onclick="handleToggleSideNavMenu()">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
      </svg>
    </button>
  </div>
</section>

<style>
  input[type="search"]::-webkit-search-decoration,
  input[type="search"]::-webkit-search-cancel-button,
  input[type="search"]::-webkit-search-results-button,
  input[type="search"]::-webkit-search-results-decoration {
    -webkit-appearance:none;
  }

  #side-nav-menu.show {
    transform: translateX(0);
    z-index: 50;
  }
</style>
<div id="side-nav-overlay" onclick="handleToggleSideNavMenu()"
  class="hidden lg:hidden fixed top-0 left-0 bottom-0 right-0 w-full h-full bg-black bg-opacity-30 z-40">
</div>


<div class="hidden lg:block w-72"></div>

<nav id="side-nav-menu" class="fixed top-0 left-0 -translate-x-80 lg:translate-x-0 lg:pt-16 w-80 lg:w-72 h-full flex flex-col overflow-y-auto bg-white">
  
  

  

  
  
    <ul class="p-6 pb-20 lg:pt-2 lg:pr-6 lg:pl-8 flex-1">
      
        
        <li>
          <a href="/docs/introduction/" title="Introduction" class=" pb-2 lg:pt-3 lg:pb-1 mr-6 block text-base lg:text-sm leading-6 lg:leading-6  font-medium text-gray-700 hover:text-gray-900 ">
            <h5>Introduction</h5>
          </a>

          
            
            <button type="button" class="z-10 p-1 text-gray-500 absolute top-4 right-4" aria-label="close sidebar navigation menu" onclick="handleToggleSideNavMenu()">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          
        </li>
        
      
        
        <li>
          <a href="/docs/getting-started/" title="Getting Started" class=" pt-3  pb-2 lg:pt-3 lg:pb-1 mr-6 block text-base lg:text-sm leading-6 lg:leading-6  font-medium text-gray-700 hover:text-gray-900 ">
            <h5>Getting Started</h5>
          </a>

          
        </li>
        
      
        
        <li>
          <a href="/docs/tutorial/" title="Tutorial" class="pt-3 pb-2 lg:pb-1 block text-base lg:text-sm leading-6 lg:leading-6  font-semibold text-gray-800 hover:text-gray-800 ">
            <h5>Tutorial</h5>
          </a>
          <ul>
            
              <li>
                <a href="/docs/tutorial/tutorial-app-with-webrtc/" title="Tutorial building a live stream app with WebRTC" class="py-2 lg:py-1 pl-4 lg:border-l block text-base lg:text-sm leading-6 lg:leading-6  border-blue-600 hover:border-blue-600 font-medium text-blue-600 hover:text-blue-600 ">Tutorial with WebRTC</a>
              </li>
            
          </ul>
        </li>
        
      
        
        <li>
          <a href="/docs/video-input/" title="Video Input" class=" pt-3  pb-2 lg:pt-3 lg:pb-1 mr-6 block text-base lg:text-sm leading-6 lg:leading-6  font-medium text-gray-700 hover:text-gray-900 ">
            <h5>Video Input</h5>
          </a>

          
        </li>
        
      
    </ul>
  
</nav>
    
    <div class="lg:flex-1 min-w-0 px-4 lg:px-10 pt-6 lg:pt-8">
      <main>
        
<ol class="mb-2 flex">
  
  
  

  
    
  
  

  
  <li class="group flex items-center text-blue-600 font-bold text-sm">
    <a href="/docs/tutorial/" class="block hover:underline">Tutorial</a>
    <span class="block mx-1 group-last:hidden">/</span>
  </li>

  
  <li class="group flex items-center text-blue-600 font-bold text-sm">
    <a href="/docs/tutorial/tutorial-app-with-webrtc/" class="block hover:underline">Tutorial with WebRTC</a>
    <span class="block mx-1 group-last:hidden">/</span>
  </li>

</ol>



        <article id="docs-content" class="prose prose-sm lg:prose-base max-w-none prose-blue prose-a:no-underline hover:prose-a:underline">
          <h1 id="tutorial-building-a-live-stream-app-with-webrtc">Tutorial building a live stream app with WebRTC</h1>
<p>This tutorial will show you how to build a live video stream web app with WebRTC video source input. Please read it on <a href="/docs/video-input/">video input documentation</a> to understand what the WebRTC is and how it&rsquo;s compared with RTMP.</p>
<p>This tutorial will show you how to create a streamer client and viewer page.
We will create a web page for the streamer client to capture our webcam directly and send it to Inlive encoder as a video source input once the user clicks the start button.
We will create a web page that can use by live stream viewers to watch the live video stream.</p>
<h2 id="a-requirement">A. Requirement</h2>
<p>Before coding your web app, you need to create an application key as stated in our <a href="/docs/getting-started">getting started documentation</a>. Please make sure you write down that key after you create it because it is used in this web app that we will create.</p>
<h2 id="b-create-a-streamer-client">B. Create a streamer client</h2>
<p>A streamer client will be using a video capture to capture your webcam video and send it to Inlive encoder. Inlive encoder will encode and publish the video that we watch later with a video player. In this tutorial we will create a streamer client that will create a stream with the name with set, then start a stream.</p>
<h3 id="1-create-a-live-stream">1. Create a live stream</h3>
<p>Before going live, a streamer will always need to create a live stream. This live stream is unique, and it will provide single video input and single video output that can watch through a video player. To create a live stream, use <code>https://api.inlive.app/v1/streams/create</code> endpoint to create a stream. But before interacting with the API, first, we need to create a function called <code>APIRequest</code> and default options for customized and reusable API request function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">origin</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://api.inlive.app&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">apiVersion</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;v1&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">apiKey</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;&lt;your-api-key&gt;&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">apiRequest</span>(<span style="color:#a6e22e">apiKey</span>, <span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">body</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">opts</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span><span style="color:#a6e22e">method</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;cors&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;Authorization&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`Bearer </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">apiKey</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">body</span><span style="color:#f92672">!==</span> <span style="color:#e6db74">&#39;undefined&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">body</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">body</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">res</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>,<span style="color:#a6e22e">opts</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">bodyJSON</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">bodyJSON</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">err</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">err</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then we use the function above to create a create stream function that will binded to create stream button. When the button clicked, the function will called and create a stream with a stream name <code>my first stream</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">createStream</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">origin</span><span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">apiVersion</span><span style="color:#e6db74">}</span><span style="color:#e6db74">/streams/create`</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>{
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">resp</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">apiRequest</span>(<span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">apiKey</span>, <span style="color:#a6e22e">url</span>, <span style="color:#e6db74">&#39;POST&#39;</span>,{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;my first stream&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">slug</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;my-first-stream&#39;</span>
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2-create-a-web-page-for-monitoring-and-create-or-start-stream">2. Create a web page for monitoring and create or start stream.</h3>
<p>Use the code below to create a simple web page that contain a video element to monitor the captured video stream from your video, and buttons for create a stream, and start the stream.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">video</span> <span style="color:#a6e22e">autoplay</span> <span style="color:#a6e22e">muted</span> <span style="color:#a6e22e">controls</span> <span style="color:#a6e22e">playsinline</span>&gt;&lt;/<span style="color:#f92672">video</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;createStream()&#34;</span>&gt;Create Stream&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;startStream()&#34;</span>&gt;Start Stream&lt;/<span style="color:#f92672">button</span>&gt;
</span></span></code></pre></div><p>We need to set the video element to be muted and autoplay to make the video plays automatically once it&rsquo;s loaded.</p>
<h3 id="3-capture-the-video">3. Capture the video.</h3>
<p>Read the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API">WebRTC APIs</a> and learn about <a href="https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API">how to capture the video from your webcam</a>. You need to understand how to get permission from users to allow you to capture the video from their webcam. Below is an example of how we capture the video from the webcam when the start stream button is clicked.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">startStream</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">videoEl</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;video&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">constraints</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">video</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">frameRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1280</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">720</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">audio</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">localStream</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">mediaDevices</span>.<span style="color:#a6e22e">getUserMedia</span>(<span style="color:#a6e22e">constraints</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">videoEl</span>.<span style="color:#a6e22e">srcObject</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">localStream</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3-initiate-the-webrtc-connection-by-sending-offer-sdp-and-receiving-an-answer-from-inlive-api">3. Initiate the WebRTC connection by sending offer SDP and receiving an answer from inLive API</h3>
<p>Once the video stream input is available, we&rsquo;re ready to send the video stream to Inlive encoder and start publishing our live video stream. To send the video, these are the steps we need to follow:</p>
<ol>
<li>
<p>Create <code>RTCPeerConnection</code> object and add the media stream tracks to this RTCPeerConnection. This is an important step to make sure the Offer SDP that we will generate will have information about our media tracks, like video and audio codec information. The RTCPeerConnection also will need to have a media track before being able to start the ice gathering process.</p>
<p>We modify the start stream function and adding some lines to send the video through WebRTC connection.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span> <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">startStream</span>(){
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">videoEl</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;video&#39;</span>);
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">constraints</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">video</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">frameRate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>,
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1280</span>,
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">720</span>,
</span></span><span style="display:flex;"><span>             },
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">audio</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>         };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">localStream</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">mediaDevices</span>.<span style="color:#a6e22e">getUserMedia</span>(<span style="color:#a6e22e">constraints</span>);
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">videoEl</span>.<span style="color:#a6e22e">srcObject</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">localStream</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">servers</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">iceServers</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>             { <span style="color:#a6e22e">urls</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;stun:stun.l.google.com:19302&#39;</span> },
</span></span><span style="display:flex;"><span>             {
</span></span><span style="display:flex;"><span>                 <span style="color:#a6e22e">urls</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;turn:34.101.121.241:3478&#39;</span>,
</span></span><span style="display:flex;"><span>                 <span style="color:#a6e22e">username</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;username&#39;</span>,
</span></span><span style="display:flex;"><span>                 <span style="color:#a6e22e">credential</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;password&#39;</span>
</span></span><span style="display:flex;"><span>             }
</span></span><span style="display:flex;"><span>         ]
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">peerConnection</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">RTCPeerConnection</span>(<span style="color:#a6e22e">servers</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">peerConnection</span>.<span style="color:#a6e22e">oniceconnectionstatechange</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>         <span style="color:#75715e">// handle state change (disconnect, connected)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>         <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">iceConnectionState</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">peerConnection</span>.<span style="color:#a6e22e">iceConnectionState</span>;
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;iceConnectionState&#39;</span>, <span style="color:#a6e22e">iceConnectionState</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">peerConnection</span>.<span style="color:#a6e22e">onicecandidate</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>         <span style="color:#75715e">// initiate the stream process once ice gathering is finished
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>         <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">candidate</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">initStream</span>(<span style="color:#a6e22e">slug</span>,<span style="color:#a6e22e">peerConnection</span>,<span style="color:#a6e22e">options</span>);
</span></span><span style="display:flex;"><span>         }
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#75715e">// we use stream from the webcam that we captured from previous step
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>     <span style="color:#a6e22e">localStream</span>.<span style="color:#a6e22e">getTracks</span>().<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">track</span>) =&gt; {
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">peerConnection</span>.<span style="color:#a6e22e">addTrack</span>(<span style="color:#a6e22e">track</span>, <span style="color:#a6e22e">localStream</span>);
</span></span><span style="display:flex;"><span>     });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">offerSession</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">peerConnection</span>.<span style="color:#a6e22e">createOffer</span>();
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">peerConnection</span>.<span style="color:#a6e22e">setLocalDescription</span>(<span style="color:#a6e22e">offerSession</span>);
</span></span><span style="display:flex;"><span>     } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">err</span>);
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div></li>
<li>
<p>If you see <code>peerConnection.onicecandidate</code> line above, there is an <code>initStream</code> function called after the ice candidate gathering is finished. The <code>event.candidate === null</code> means the gathering process is finished. The <code>initStream</code> function is called to initiate a WebRTC connection with the inLive server by sending an HTTP POST request to API endpoint <code>https://api.inlive.app/v1/streams/${streamid}/init</code>.</p>
<p>Then we create <code>initStream</code> function that use that <code>APIRequest</code> function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">initStream</span>(<span style="color:#a6e22e">slug</span>,<span style="color:#a6e22e">peerConnection</span>,<span style="color:#a6e22e">options</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">body</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">slug</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">slug</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">session_description</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">peerConnection</span>.<span style="color:#a6e22e">localDescription</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">origin</span><span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">apiVersion</span><span style="color:#e6db74">}</span><span style="color:#e6db74">/streams/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">slug</span><span style="color:#e6db74">}</span><span style="color:#e6db74">/init`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">resp</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">apiRequest</span>(<span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">apiKey</span>,<span style="color:#a6e22e">url</span>,<span style="color:#e6db74">&#39;POST&#39;</span>,<span style="color:#a6e22e">body</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">code</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">200</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">answerSDP</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">RTCSessionDescription</span>(<span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">peerConnection</span>.<span style="color:#a6e22e">setRemoteDescription</span>(<span style="color:#a6e22e">answerSDP</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Failed to init stream session&#39;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">err</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>As you see above, once we got the response from the init endpoint, we set the <code>peerConnection</code> with the answer SDP that we extract from the response by calling <code>peerConnection.setRemoteDescription(answerSDP)</code>.</p>
</li>
<li>
<p>Once the RTCPeerConnection is set with both offer and answer SDP, it will initiate the connection to the remote peer, and the <code>peerConnection.oniceconnectionstatechange</code> will be triggered if the connection state is changing.</p>
</li>
</ol>
<h3 id="4-get-the-video">4. Get the video</h3>
<p>Once we streamed the video from our webcam through WebRTC, we can watch the video by getting the video URL through the stream detail endpoint.
Get the stream detail by sending HTTP GET request to the API endpoint <code>https://api.inlive.app/v1/streams/${streamid}</code>. Let&rsquo;s create a get stream function that we can call later</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getStream</span>(<span style="color:#a6e22e">slug</span>,<span style="color:#a6e22e">options</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">origin</span><span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">apiVersion</span><span style="color:#e6db74">}</span><span style="color:#e6db74">/streams/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">slug</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">apiResp</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">apiRequest</span>(<span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">apiKey</span>, <span style="color:#a6e22e">url</span>, <span style="color:#e6db74">&#39;GET&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">apiResp</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">err</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The API response will return data like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;code&#34;</span>: <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;OK&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;data&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;my first stream&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;slug&#34;</span>: <span style="color:#e6db74">&#34;my-first-stream&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;start_date&#34;</span>: <span style="color:#e6db74">&#34;2022-02-22T10:28:33.799416Z&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;end_date&#34;</span>: <span style="color:#e6db74">&#34;2022-02-22T10:51:31.049414Z&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;hls_manifest_path&#34;</span>: <span style="color:#e6db74">&#34;https://bifrost.inlive.app/streams/2/master.m3u8&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;dash_manifest_path&#34;</span>: <span style="color:#e6db74">&#34;https://bifrost.inlive.app/streams/2/manifest.mpd&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;my first stream&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;created_by&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2022-02-22T10:28:20.69262Z&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;updated_by&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;updated_at&#34;</span>: <span style="color:#e6db74">&#34;2022-02-22T10:51:31.050747Z&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>There are two options to play the video, and you can <a href="/docs/guide/playing-video">read more detail here</a>. But in this tutorial, we will use the shaka player to embed the video player to our website. The code below will show you how to use HLS URL playlist from API to play it with Shaka Player. We use the modified version of <a href="https://shaka-player-demo.appspot.com/docs/api/tutorial-basic-usage.html">Shaka basic tutorial example</a> for this. Create a new page and use the code below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">title</span>&gt;Watch a live stream&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">defer</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://ajax.googleapis.com/ajax/libs/shaka-player/3.3.2/shaka-player.compiled.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">defer</span>&gt;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">manifestUri</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;https://bifrost.inlive.app/streams/2/manifest.mpd&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">initApp</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Install built-in polyfills to patch browser incompatibilities.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">shaka</span>.<span style="color:#a6e22e">polyfill</span>.<span style="color:#a6e22e">installAll</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Check to see if the browser supports the basic APIs Shaka needs.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">shaka</span>.<span style="color:#a6e22e">Player</span>.<span style="color:#a6e22e">isBrowserSupported</span>()) {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Everything looks good!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">initPlayer</span>();
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// This browser does not have the minimum set of APIs we need.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Browser not supported!&#39;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">initPlayer</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Create a Player instance.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">video</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;video&#39;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">player</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">shaka</span>.<span style="color:#a6e22e">Player</span>(<span style="color:#a6e22e">video</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Attach player to the window to make it easy to access in the JS console.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            window.<span style="color:#a6e22e">player</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">player</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Listen for error events.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">player</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#a6e22e">onErrorEvent</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Try to load a manifest.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">// This is an asynchronous process.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">player</span>.<span style="color:#a6e22e">load</span>(<span style="color:#a6e22e">manifestUri</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// This runs if the asynchronous load is successful.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;The video has now been loaded!&#39;</span>);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// onError is executed if the asynchronous load fails.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">onError</span>(<span style="color:#a6e22e">e</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onErrorEvent</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Extract the shaka.util.Error object from the event.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">onError</span>(<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">detail</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onError</span>(<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Log the error.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Error code&#39;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">code</span>, <span style="color:#e6db74">&#39;object&#39;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            document.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;DOMContentLoaded&#39;</span>, <span style="color:#a6e22e">initApp</span>);
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">video</span> <span style="color:#a6e22e">autoplay</span> <span style="color:#a6e22e">muted</span> <span style="color:#a6e22e">controls</span> <span style="color:#a6e22e">playsinline</span>&gt;&lt;/<span style="color:#f92672">video</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div>
        </article>
      </main>
      
<nav class="py-16">
  
  
  
  

  <ul class="grid grid-cols-1 lg:grid-cols-2 justify-between gap-4">
    <li>
      
        
        <a href="/docs/tutorial/" class="px-4 py-3 lg:p-4 flex justify-between gap-x-4 border border-gray-300 hover:border-blue-400 rounded-lg font-medium text-base text-blue-600">
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
          </span>
          <span class="flex-1 text-right">Tutorial</span>
        </a>
        
      
    </li>
    <li>
      
        
        <a href="/docs/video-input/" class="px-4 py-3 lg:p-4 flex justify-between gap-x-4 border border-gray-300 hover:border-blue-400 rounded-lg font-medium text-base text-blue-600">
          <span class="flex-1 text-left">Video Input</span>
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
          </span>
        </a>
        
      
    </li>
  </ul>
</nav>

      <footer class="border-t border-t-gray-300 text-center pt-10 pb-16">
  <p class="text-sm leading-6 text-gray-600">&copy; 2022, inLive.</p>
</footer>
    </div>
    <div class="hidden xl:block w-64">
      
    </div>
  </div>
</div>



<script type="text/javascript" src="/js/global.min.js" defer></script>
<script type="text/javascript" src="/js/docs.min.js" defer></script>

</body>
</html>